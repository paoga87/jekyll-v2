<!doctype html>

<html class="no-js" lang="en">

<head>


	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

	Paola Garcia Cardenas

	██████╗░░█████╗░░█████╗░██╗░░░░░░█████╗░
	██╔══██╗██╔══██╗██╔══██╗██║░░░░░██╔══██╗
	██████╔╝███████║██║░░██║██║░░░░░███████║
	██╔═══╝░██╔══██║██║░░██║██║░░░░░██╔══██║
	██║░░░░░██║░░██║╚█████╔╝███████╗██║░░██║
	╚═╝░░░░░╚═╝░░╚═╝░╚════╝░╚══════╝╚═╝░░╚═╝

	- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.png">
	<title>Using SendGrid Webhooks to Implement a Client’s Platform – Paola Garcia Cardenas</title>
	<meta name="description" content="Using SendGrid Webhooks to Implement a Client’s Platform">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Using SendGrid Webhooks to Implement a Client’s Platform – Paola Garcia Cardenas">
	<meta name="twitter:description" content="Using SendGrid Webhooks to Implement a Client’s Platform">
	<meta name="twitter:image:src" content="http://paolagarcia.com/images/post/sendgrid.jpg">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Using SendGrid Webhooks to Implement a Client’s Platform – Paola Garcia Cardenas" />
	<meta property="og:description" content="Using SendGrid Webhooks to Implement a Client’s Platform" />
	<meta property="og:image" content="http://paolagarcia.com/images/post/sendgrid.jpg" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Muli:300,400,600,700" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	   
		ga('create', 'UA-168747180-1', 'auto');
		ga('send', 'pageview');
	</script>
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://paolagarcia.com" data-page-url="/blog/sendgridwebhooks">


	<header class="header">

	<div class="wrap">

		
		<a href="/" class="header__title">
			Paola Garcia Cardenas
		</a>
		

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Home</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/contact" class="menu__list__item__link">Contact</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/resume" class="menu__list__item__link">Resume</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blog/" class="menu__list__item__link">Blog</a>
					</li>
					
				</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg></div>

	<div class="page-loader"></div>

	
	<div class="page">

		<div class="page__content" data-page-title="Using SendGrid Webhooks to Implement a Client’s Platform – Paola Garcia Cardenas">

			<section class="hero hero--single">

	<div class="hero__image" style="background-image: url(/images/post/sendgrid.jpg)">
		<div class="hero__overlay"></div>
	</div>

	<div class="wrap">

		<h1>Using SendGrid Webhooks to Implement a Client’s Platform</h1>
		<p>February 25, 2017 </p>

	</div>

</section>

<section class="single">

	<div class="wrap">

		<article class="single-post">

			<p>Creating awesome end-user experiences while trying to exceed expectations, is every developer’s dream. The road ahead is bound to be a rollercoaster ride. A ride full of bugs, some roadblocks, testing and even failing once in a while. The good news is, the road is also bound to be full of joy and learning. That is what I love about my job.</p>

<p>I always enjoy working on a team, although that is not always possible. It depends on the company size, project deadlines and resource allocation, to mention some examples. For this particular project, I was asked to work on my own. Even though I was intimidated at first, I decided to not let my fears overshadow a window of opportunity, and so I took on the challenge. Here is my story.</p>

<h3 id="beginning-stages-expect-the-unexpected">Beginning Stages: Expect the Unexpected</h3>

<p>Having a project in mind is exciting… until you hit those roadblocks.</p>

<blockquote>
  <p>1 week…
2 weeks…</p>
</blockquote>

<p>Sometimes, it felt as if developing was taking me 10 steps ahead, while testing was taking 20 steps back.</p>

<p>Our platform was already setup. We were already using SendGrid’s web API to send emails through our web application. Our goal was to provide admin-level users with the flexibility of not only sending emails, but also be able to track them from beginning to end.</p>

<p>The solution? Digging deeper and finding a way to integrate with SendGrid.</p>

<p>There were two main purposes when the goal for this project was set:</p>

<ol>
  <li>To enhance our platform’s dashboard functionality, and</li>
  <li>To provide admins with more resources and better ways to use our web application</li>
</ol>

<p>Of course, as soon as the project began, a challenge presented itself. The SendGrid version (v2) in place, was already “old” and SendGrid’s API v3 was recommended. To take full advantage of SendGrid’s Web APIs and Event Webhooks, an upgrade was needed. This added unexpected tasks, and a roadblock to the list. A few steps needed to happen before completing the integration:</p>

<ol>
  <li>SendGrid migration from v2 to v3</li>
  <li>Email implementation throughout our web application</li>
  <li>Testing of the implementation</li>
</ol>

<p>Next, it was decision time: to use the API or to use the event webhooks for the integration?</p>

<p>Thankfully, after doing some research, the answer was a few emails away. The folks over at SendGrid’s DX Team were responsive and very supportive along the way (even when responding to issues on SendGrid’s PHP helper library <a href="https://github.com/sendgrid/sendgrid-php">Github repo</a> -which we use).</p>

<p>The final decision: Integrating with SendGrid using the event webhooks to help achieve our goal was the best way to go for our use case.</p>

<h3 id="what-is-a-webhook">What is a Webhook?</h3>

<p>In short, webhooks are called reverse APIs, or technically speaking a web callback. Webhooks enable apps to push data to other applications when it becomes available. Some of these web callbacks could also happen when the data has reached certain batch size. It all depends on the application that sends the data and whether or not they give their users the flexibility to choose how often the data is sent.
In our case, SendGrid either posts events every 30 seconds or when the batch size reaches 768 kilobytes, whichever takes place first. You can check this link for more information on SendGrid’s Event Webhook Requests.</p>

<h3 id="preliminary-tasks">Preliminary Tasks</h3>

<p>At this point, one thing was clear, we were going to be using SendGrid’s webhooks for the integration. My preliminary tasks list looked something like this:</p>

<h4 id="migrating-sendgrid-from-v2-to-v3-api">Migrating SendGrid from v2 to v3 API</h4>
<p>Even though SendGrid’s v2 would have worked, upgrading to v3 was our best option. This is because v3 has the capability to deliver events as JSON arrays. It also provides more data with certain events.</p>

<h4 id="event-notifications-url-setup">Event notifications URL setup</h4>
<p>This must be done in order to be able to receive notifications from SendGrid’s API. An endpoint file was also setup and configured to capture data via HTTP POST.</p>

<h4 id="endpoint-file-setup-on-sendgrid">Endpoint file setup on SendGrid</h4>
<p>Your HTTP POST URL can be setup within SendGrid’s account: Mail Settings &gt; Event Notification &gt; Configuration.</p>

<h4 id="integration-testing">Integration testing</h4>
<p>The endpoint file is then tested simply by clicking on the “Test Your Integration” button. When clicked, SendGrid sends a simulated POST of events to the callback URL that was defined before.</p>

<p>Here is an example of a decoded JSON array containing SendGrid’s email events:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">Array</span><span class="w">
</span><span class="err">(</span><span class="w">    
  </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">Array</span><span class="w">        
     </span><span class="err">(</span><span class="w">            
         </span><span class="p">[</span><span class="err">meeting_name</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">myMeeting</span><span class="mi">1</span><span class="w">            
         </span><span class="p">[</span><span class="err">ip</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="mf">0.00</span><span class="err">.</span><span class="mi">0</span><span class="mf">0.00</span><span class="w">            
         </span><span class="p">[</span><span class="err">response</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">250</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">accepted</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">delivery</span><span class="w">        
         </span><span class="p">[</span><span class="err">event</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">delivered</span><span class="w">            
         </span><span class="p">[</span><span class="err">email</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">myemail@something.com</span><span class="w">            
         </span><span class="p">[</span><span class="err">timestamp</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">1485811139</span><span class="w">            
         </span><span class="p">[</span><span class="err">uID</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">01130</span><span class="w">        
     </span><span class="err">)</span><span class="w">
     
 </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">Array</span><span class="w">        
     </span><span class="err">(</span><span class="w">            
        </span><span class="p">[</span><span class="err">meeting_name</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">myMeeting</span><span class="mi">1</span><span class="w"> 
        </span><span class="p">[</span><span class="err">event</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">processed</span><span class="w">            
        </span><span class="p">[</span><span class="err">email</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">myemail@something.com</span><span class="w">
        </span><span class="p">[</span><span class="err">timestamp</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">1485811026</span><span class="w">            
        </span><span class="p">[</span><span class="err">uID</span><span class="p">]</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="mi">01130</span><span class="w">        
     </span><span class="err">)</span><span class="w"> 
</span><span class="err">)</span><span class="w">
</span></code></pre></div></div>

<h4 id="additional-testing">Additional testing</h4>

<p>This was performed via cURL in order to ensure the endpoint file for the integration was working as expected. You can see an example of the endpoint file on our end:</p>

<div><script src="https://gist.github.com/paoga87/47649d822cb7d2e1fe083441e77e2ed3.js"></script></div>

<p>Thanks to this project, I was able to contribute to SendGrid’s documentation on Github, you can also see this example on their docs site.</p>

<h4 id="platforms-back-end-setup">Platform’s back-end setup</h4>
<p>Technology was developed on the back-end to support the integration. We work on a LAMP stack, therefore using SendGrid’s PHP Helper Library was helpful.</p>

<h4 id="front-end-implementation">Front-end implementation</h4>
<p>Development, planning, and layout of the event data was needed to be able to efficiently display the information to end-users.</p>

<h4 id="beta-testing">Beta Testing</h4>
<p>Use cases were developed. Testing included hours of not only testing, but also discovering and fixing bugs.</p>

<hr />

<h3 id="other-stages-stages-in-between">Other Stages, Stages in Between</h3>

<p>Many subtasks were omitted previously, for the sake of the reader. Sometimes there is a lot of work (and stages) happening behind scenes to get to a final result.</p>

<p>During my early days at my current job, and even before I took on this challenge, my boss sent me an email with the following PDF attached:</p>

<p><img src="/images/post/sendgrid-pdf.jpg" alt="Developing a growth mindset — a gift from my boss pinned on one of my desk walls." /></p>

<p>I printed the PDF. The message on this piece of paper really caught my attention, and immediately became one of my favorite wall decorations. One thing I did not know then, is that as simple as it seems, the message on it was going to help me accomplish ANY challenges; including this project.</p>

<p>I admit it. I probably went through so many different “mind stages” for every single “INSTEAD OF…” and changed my mind after “SAY[ing] THIS…” every time. I learned to confront challenges with a more positive mentality, which helped me focus to manage the project and writing code. And most importantly, I enjoyed the rollercoaster ride.</p>

<h3 id="final-stage-project-completion">Final Stage: Project Completion</h3>

<p>When a project is complete, it means the project has only just started. Once you have tackled a task, you want to implement it over and over to make it work even better. It does not matter if is too easy or too hard.</p>

<p>You can do it.</p>

<p>Challenges are everywhere.</p>

<p>Take them on.</p>

<p>You will enjoy it too.</p>


		</article>

	</div>

</section>

		</div>

	</div>


	<footer class="footer">

	<div class="wrap">

		<p class="footer__text">Software Developer | Cybersecurity | InfoSec | Soccer | Run | Dogs & cats</p>

		<div class="footer__copyright">
			<span>© 2020 Crafted with ♥ by Paola Garcia Cardenas</span><br>
			<span>Built with <a href="https://jekyllrb.com/" target="_blank">Jekyll</a></span>
		</div>

		<ul class="socials">
	
	
	
	
	<li class="socials__item">
		<a href="https://twitter.com/paogarciac" target="_blank" class="socials__item__link" title="Twitter">
			<i class="fab fa-twitter" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	<li class="socials__item">
		<a href="https://www.instagram.com/paoga87/" target="_blank" class="socials__item__link" title="Instagram">
			<i class="fab fa-instagram" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://medium.com/@paogarciac" target="_blank" class="socials__item__link" title="Medium">
			<i class="fab fa-medium" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/paoga87" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/paogarciac/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

	</div>

</footer>


	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/personal-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>